procedure

! Do change these
local master  string init="10SEP09080931-P1BS-052401306030_01_P001"
local second  string init="10SEP14082717-P1BS-052403186290_01_P001"
local outdir  string init="IZ1_10SEP09_10SEP14"
local prepan  string init="10SEP09080931-P1BS-052401306030_01_P001"
local premul  string init="10SEP09080931-M1BS-052401306030_01_P001"
local postpan string init="10SEP14082717-P1BS-052403186290_01_P001"
local postmul string init="10SEP14082717-M1BS-052403186290_01_P001"

! Don't change these
local normprepan string init="nxprepan.img"
local normpostpan string init="nxpostpan.img"
local ps string init="_pan_sharp"
local img string init=".img"
local ntf string init=".ntf"

body

! Orthorectify the master (coregister to CIB)
wv2master &master

! Orthorectify the secondary (coregister to master)
wv2secondary &second &master

! Create dir for pairwise products
ush mkdir &outdir

! pre to post normalization
wv2norm &prepan &postpan &outdir

! pan sharpen the normalized pre and post products
wv2pansharp &outdir &prepan &normprepan
wv2pansharp &outdir &postpan &normpostpan

! pre to post change detection
detwv5 &outdir +
  &outdir/&premul&ps +
  &outidr/&postmul&ps +
  &outdir
ush cp outtab &outdir/
genfade &outdir &outdir&img
ush tclsh wv2asc2fade.tcl &outdir/ &prepan&ntf &postpan&ntf
extract_aoi_chips &prepan&img &outdir &postpan&img
getlinesamplonlat
ush cp linesamplonlat.dat &outdir/
ush cd &outdir/ ; tclsh ../ls2ll.tcl
ush cd &outdir/ ; tar chf fade.tar *.csv fchip* ftrip*

done>
end-proc
