tstentropy
translog INP=AFIDS_ROOT TRANS=afidsroot
translog INP=AFIDS_TESTDATA TRANS=aftestdata
if (afidsroot = "")
else
    if (aftestdata = "")
    else
        ush ln -s /media/sf_raid3/test_data/gll mm
        ush ln -s /media/sf_raid3/test_data/cassini/iss ca
    end-if
end-if
let $echo="no"
Generic Image Test

test image 1 - entropy should be 0
gen a.img 16 16
Beginning VICAR task gen
GEN Version 6
GEN task completed
entropy a.img
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 0.00000   SIGMA_DELTA_DN =   0.00000   #_OF_PIXELS =      240
let $echo="no"
test image 2 - entropy should be 1.0
gen b.img 16 16 mod=2
Beginning VICAR task gen
GEN Version 6
GEN task completed
entropy b.img
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 1.00000   SIGMA_DELTA_DN =   1.00209   #_OF_PIXELS =      240
let $echo="no"
test image 3 (byte) - entropy should be 0.811278
gen c.img 16 16 mod=4
Beginning VICAR task gen
GEN Version 6
GEN task completed
entropy c.img
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 0.81128   SIGMA_DELTA_DN =   1.73567   #_OF_PIXELS =      240
let $echo="no"
test image 4 (half) - entropy should be 0.811278,
local variable ent should be filled by that value
local out_ent real
cform c.img d.img  'half
Beginning VICAR task cform
CFORM VERSION 06-JUN-1998
OUT = IN *     1.000+     0.000
INPUT FORMAT = BYTE
OUTPUT FORMAT = HALF
CONVERSION COMPLETE
entropy d.img value=out_ent
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 0.81128   SIGMA_DELTA_DN =   1.73567   #_OF_PIXELS =      240
disp out_ent

out_ent=0.811278104782

let $echo="no"


GALILEO Test

Testing AREA parameter
entropy mm/s0349666345.u area=(1,1,100,100)
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 3.17821   SIGMA_DELTA_DN =   8.00434   #_OF_PIXELS =     9900
let $echo="no"

>>> NOTE TESTERS <<<
Testing PHIST keyword to generate normalized difference histogram
The Histogram generated by the PHIST keyword has data range from 
-4095 to 4095, which would be too large to capture in a session log 
file.  The Tester is suggested to execute the following case to test 
the PHIST keyword.
-- RUN THE FOLLOWING --
UNIX: VICAR>entropy /project/test_work/testdata/mipl/gll/s0249220600.1 +
      VICAR>+ 'phist
let $echo="no"

>>> NOTE TESTERS <<<
Testing ZEROES keyword
-- RUN THE FOLLOWING --
UNIX: VICAR>entropy /project/test_work/testdata/mipl/gll/s0249220600.1 +
      VICAR>+ 'phist 'zeroes
let $echo="no"

Testing DISTFILE parameter to generate difference histogram file
entropy mm/s0349632122.1 distfile=gll.dist
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 1.42923   SIGMA_DELTA_DN =   3.72865   #_OF_PIXELS =   639200
let $echo="no"

Testing VALUE parameter
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 0.14830   SIGMA_DELTA_DN =   2.88908   #_OF_PIXELS =   639200

out_ent=0.148304834962


Testing MODE parameter.  GLL label should not be updated.
copy mm/s0349759013.r s0349759013.r
Beginning VICAR task copy
 COPY VERSION 12-JUL-1993
label-list s0349759013.r
Beginning VICAR task label
************************************************************
 
        ************  File s0349759013.r ************
                3 dimensional IMAGE file
                File organization is BSQ
                Pixels are in BYTE format from a X86-LINUX host
                1 bands
                800 lines per band
                800 samples per line
                0 lines of binary header
                0 bytes of binary prefix per line
---- Task: SSIMERGE -- User: ADC040 -- Fri May  2 12:41:31 1997 ----
MISSION='GALILEO'
SENSOR='SSI'
PICNO='G1G0021'
RIM=3497590
MOD91=13
MOD10=0
MOD8=0
PARTITION=1
PA='G1GSGREGIO01'
TCA='-000T11:21:40Z'
TARGET='GANYMEDE'
SCETYEAR=1996
SCETDAY=179
SCETHOUR=6
SCETMIN=9
SCETSEC=19
SCETMSEC=383
ERTYEAR=1996
ERTDAY=188
ERTHOUR=0
ERTMIN=11
ERTSEC=33
ERTMSEC=979
FILTER=0
EXP=12.5003
GAIN=2
RATE=2
TLMFMT='IM4'
BOOM='N'
MOFIBE='001000'
ENCODING_TYPE='BARC RATE CONTROL '
TBPPXL=2.26807
TPPLNE=156.309
INA=29.5312
EMA=47.5411
HRA=13.4124
TWIST=253.891
CONE=201.244
RA=260.873
DEC=-20.8262
SMEAR=0.1
CUT_OUT_WINDOW=(1, 1, 800, 800)
PHA=20.8903
HSCL=112.829
VSCL=82.2588
LAT=19.0527
LON=149.248
PLRANGE=1.08218e+06
SLRANGE=7660.45
SOLRANGE=7.77707e+08
SUB_SOLAR_LATITUDE=-1.87147
SUB_SOLAR_LONGITUDE=170.453
SUB_SPACECRAFT_LATITUDE=1.53993
SUB_SPACECRAFT_LONGITUDE=181.26
SUNAZ=6.23045
NORAZ=282.792
SCAZ=341.739
SMRAZ=-999.0
RAD=-999.0
SPICE_C_ID='M902'
TARGET_CENTER_DISTANCE=9636.56
SUB_SPACECRAFT_LINE=6753.99
SUB_SPACECRAFT_SAMPLE=-18857.1
READOUTMODE='NOT APPLICABLE'
ENTROPY=4.32234
---- Task: CATLABEL -- User: ADC040 -- Fri Jun 20 11:10:16 1997 ----
---- Task: BADLABEL -- User: ADC040 -- Fri Jun 20 11:10:27 1997 ----
REDR_EXT='1'
---- Task: COPY -- User: afids -- Thu Oct 10 12:12:54 2019 ----
 
************************************************************
entropy s0349759013.r 'label
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 3.87400   SIGMA_DELTA_DN =  18.19502   #_OF_PIXELS =   639200
ENTROPY ADDED TO HISTORY LABEL
label-list s0349759013.r
Beginning VICAR task label
************************************************************
 
        ************  File s0349759013.r ************
                3 dimensional IMAGE file
                File organization is BSQ
                Pixels are in BYTE format from a X86-LINUX host
                1 bands
                800 lines per band
                800 samples per line
                0 lines of binary header
                0 bytes of binary prefix per line
---- Task: SSIMERGE -- User: ADC040 -- Fri May  2 12:41:31 1997 ----
MISSION='GALILEO'
SENSOR='SSI'
PICNO='G1G0021'
RIM=3497590
MOD91=13
MOD10=0
MOD8=0
PARTITION=1
PA='G1GSGREGIO01'
TCA='-000T11:21:40Z'
TARGET='GANYMEDE'
SCETYEAR=1996
SCETDAY=179
SCETHOUR=6
SCETMIN=9
SCETSEC=19
SCETMSEC=383
ERTYEAR=1996
ERTDAY=188
ERTHOUR=0
ERTMIN=11
ERTSEC=33
ERTMSEC=979
FILTER=0
EXP=12.5003
GAIN=2
RATE=2
TLMFMT='IM4'
BOOM='N'
MOFIBE='001000'
ENCODING_TYPE='BARC RATE CONTROL '
TBPPXL=2.26807
TPPLNE=156.309
INA=29.5312
EMA=47.5411
HRA=13.4124
TWIST=253.891
CONE=201.244
RA=260.873
DEC=-20.8262
SMEAR=0.1
CUT_OUT_WINDOW=(1, 1, 800, 800)
PHA=20.8903
HSCL=112.829
VSCL=82.2588
LAT=19.0527
LON=149.248
PLRANGE=1.08218e+06
SLRANGE=7660.45
SOLRANGE=7.77707e+08
SUB_SOLAR_LATITUDE=-1.87147
SUB_SOLAR_LONGITUDE=170.453
SUB_SPACECRAFT_LATITUDE=1.53993
SUB_SPACECRAFT_LONGITUDE=181.26
SUNAZ=6.23045
NORAZ=282.792
SCAZ=341.739
SMRAZ=-999.0
RAD=-999.0
SPICE_C_ID='M902'
TARGET_CENTER_DISTANCE=9636.56
SUB_SPACECRAFT_LINE=6753.99
SUB_SPACECRAFT_SAMPLE=-18857.1
READOUTMODE='NOT APPLICABLE'
ENTROPY=4.32234
---- Task: CATLABEL -- User: ADC040 -- Fri Jun 20 11:10:16 1997 ----
---- Task: BADLABEL -- User: ADC040 -- Fri Jun 20 11:10:27 1997 ----
REDR_EXT='1'
---- Task: COPY -- User: afids -- Thu Oct 10 12:12:54 2019 ----
ENTROPY=3.874
 
************************************************************
let $echo="no"


CASSINI Test
Testing AREA parameter
entropy ca/sum2.15 area=(1,1,100,100)
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 3.69354   SIGMA_DELTA_DN =   4.12834   #_OF_PIXELS =     9900
let $echo="no"

>>> NOTE TO TESTERS <<<
Testing PHIST keyword to generate normalized difference histogram
--- RUN THE FOLLOWING ---
UNIX: VICAR>entropy /project/test_work/testdata/cassini/iss/sum2.1 +
      VICAR>+ 'phist
let $echo="no"

>>> NOTE TO TESTERS <<<
Testing ZEROES keyword
--- RUN THE FOLLOWING ---
UNIX: VICAR>entropy /project/test_work/testdata/cassini/iss/sum2.2 +
      VICAR>+ 'phist 'zeroes
let $echo="no"

Testing DISTFILE parameter to generate difference histogram file
entropy ca/sum2.3 distfile=cassini.dist
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 3.29548   SIGMA_DELTA_DN =   2.55800   #_OF_PIXELS =   261632
let $echo="no"

Testing VALUE parameter
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 3.34886   SIGMA_DELTA_DN =   2.77535   #_OF_PIXELS =   261632

out_ent=3.34885764122


Testing MODE parameter.  History label should be updated.
copy ca/sum2.38 sum2.38
Beginning VICAR task copy
 COPY VERSION 12-JUL-1993
label-list sum2.38
Beginning VICAR task label
************************************************************
 
        ************  File sum2.38 ************
                3 dimensional IMAGE file
                File organization is BSQ
                Pixels are in HALF format from a X86-LINUX host
                1 bands
                512 lines per band
                512 samples per line
                0 lines of binary header
                0 bytes of binary prefix per line
---- Property: CASSINI-ISS ----
MISSION_NAME='CASSINI'
MISSION_PHASE_TYPE='BENCH'
INSTRUMENT_ID='ISSNA'
IMAGE_NUMBER=38
IMAGE_TIME='1997-128T12:34:56.800'
SOFTWARE_VERSION_ID='V4'
INSTRUMENT_MODE_ID='SUM2'
FILTER1_NAME='RED'
FILTER2_NAME='CLR'
GAIN_MODE_ID='100K'
ENCODING_TYPE='NOTCOMP'
CONVERSION_TYPE='8LSB'
DETECTOR_TEMPERATURE=-90.0
OPTICS_TEMPERATURE=-10.0
FILTER_TEMPERATURE=-999.0
LIGHT_FLOOD_STATE_FLAG='OFF'
ANTIBLOOMING_STATE_FLAG='OFF'
CALIB_LAMP_STATE_FLAG='OFF'
COMPRESSION_PARAMETER_VALUE=-1249
OFFSET=3
DARK_CURRENT=2
COMPRESSION_RATIO=-999.0
TARGET_NAME='FLATFIELD'
OBSERVATION_ID='LIGHT_XFR'
ILLUMINANT='TUNGSTEN'
LUMINANCE=5.1
EXPOSURE_DURATION=267.0
RADIANCE=5.1
---- Task: COPY -- User: afids -- Thu Oct 10 12:12:54 2019 ----
 
************************************************************
entropy sum2.38 'label
Beginning VICAR task entropy
ENTROPY version April 22, 2000
ENTROPY = 4.04745   SIGMA_DELTA_DN =   5.27645   #_OF_PIXELS =   261632
ENTROPY ADDED TO HISTORY LABEL
label-list sum2.38
Beginning VICAR task label
************************************************************
 
        ************  File sum2.38 ************
                3 dimensional IMAGE file
                File organization is BSQ
                Pixels are in HALF format from a X86-LINUX host
                1 bands
                512 lines per band
                512 samples per line
                0 lines of binary header
                0 bytes of binary prefix per line
---- Property: CASSINI-ISS ----
MISSION_NAME='CASSINI'
MISSION_PHASE_TYPE='BENCH'
INSTRUMENT_ID='ISSNA'
IMAGE_NUMBER=38
IMAGE_TIME='1997-128T12:34:56.800'
SOFTWARE_VERSION_ID='V4'
INSTRUMENT_MODE_ID='SUM2'
FILTER1_NAME='RED'
FILTER2_NAME='CLR'
GAIN_MODE_ID='100K'
ENCODING_TYPE='NOTCOMP'
CONVERSION_TYPE='8LSB'
DETECTOR_TEMPERATURE=-90.0
OPTICS_TEMPERATURE=-10.0
FILTER_TEMPERATURE=-999.0
LIGHT_FLOOD_STATE_FLAG='OFF'
ANTIBLOOMING_STATE_FLAG='OFF'
CALIB_LAMP_STATE_FLAG='OFF'
COMPRESSION_PARAMETER_VALUE=-1249
OFFSET=3
DARK_CURRENT=2
COMPRESSION_RATIO=-999.0
TARGET_NAME='FLATFIELD'
OBSERVATION_ID='LIGHT_XFR'
ILLUMINANT='TUNGSTEN'
LUMINANCE=5.1
EXPOSURE_DURATION=267.0
RADIANCE=5.1
---- Task: COPY -- User: afids -- Thu Oct 10 12:12:54 2019 ----
ENTROPY=4.04745
 
************************************************************
let $echo="no"
exi
slogoff
