procedure
parm version string def="ibis-1"
parm org string def="column"

! Sep 02, 2013 - RJB
!
! TEST SCRIPT FOR GTMOVE
!
! Vicar Programs:
!   gen gtgen gtlist gtoffset 
!
! External Programs:
!   <none>
!
! Parameters:
!   version: ibis-1, ibis-2
!   org: column, row
!
! Requires NO external test data: 
!   


refgbl $echo

body
let _onfail="stop"
let $echo="yes"

! Test 1 - null case, area

gen xxxim1 nl=50 ns=50

gtgen inp=xxxim1 out=xxxim2 'tiecnvrt +
   geotiff=("ModelTiePointTag=(0,0,0,-118,35,0.0)", +
      "ModelTiePointTag=(50,0,0,-117,35,0.0)", +
      "ModelTiePointTag=(0,50,0,-118,34,0.0)", +
      "GTRasterTypeGeoKey=1(RasterPixelIsArea)", +
      "GTModelTypeGeoKey=2(ModelTypeGeographic)", +
      "GeogAngularUnitsGeoKey=9102(Angular_Degree)", +
      "GeographicTypeGeoKey=4326(GCS_WGS_84)", +
      "GeogEllipsoidGeoKey=7030(Ellipse_WGS84)")
gtlist xxxim2

gtmove xxxim2 xxxim3 

gtlist xxxim3
gtoffset xxxim2 xxxim3

! Test 2 - null case, point

gen xxxim1 nl=50 ns=50

gtgen inp=xxxim1 out=xxxim2 'tiecnvrt +
   geotiff=("ModelTiePointTag=(0,0,0,-118,35,0.0)", +
      "ModelTiePointTag=(50,0,0,-117,35,0.0)", +
      "ModelTiePointTag=(0,50,0,-118,34,0.0)", +
      "GTRasterTypeGeoKey=2(RasterPixelIsPoint)", +
      "GTModelTypeGeoKey=2(ModelTypeGeographic)", +
      "GeogAngularUnitsGeoKey=9102(Angular_Degree)", +
      "GeographicTypeGeoKey=4326(GCS_WGS_84)", +
      "GeogEllipsoidGeoKey=7030(Ellipse_WGS84)")
gtlist xxxim2

gtmove xxxim2 xxxim3 
gtlist xxxim3
gtoffset xxxim2 xxxim3

! Test 3 - test scale change

gen xxxim1 nl=50 ns=50

gtgen inp=xxxim1 out=xxxim2 'tiecnvrt +
   geotiff=("ModelTiePointTag=(0,0,0,-118,35,0.0)", +
      "ModelTiePointTag=(50,0,0,-117,35,0.0)", +
      "ModelTiePointTag=(0,50,0,-118,34,0.0)", +
      "GTRasterTypeGeoKey=1(RasterPixelIsArea)", +
      "GTModelTypeGeoKey=2(ModelTypeGeographic)", +
      "GeogAngularUnitsGeoKey=9102(Angular_Degree)", +
      "GeographicTypeGeoKey=4326(GCS_WGS_84)", +
      "GeogEllipsoidGeoKey=7030(Ellipse_WGS84)")
gtlist xxxim2

gtmove xxxim2 xxxim3 scalefac=1.3
gtlist xxxim3

! Test 4 - test rotation

gen xxxim1 nl=50 ns=50

gtgen inp=xxxim1 out=xxxim2 'tiecnvrt +
   geotiff=("ModelTiePointTag=(0,0,0,-118,35,0.0)", +
      "ModelTiePointTag=(50,0,0,-117,35,0.0)", +
      "ModelTiePointTag=(0,50,0,-118,34,0.0)", +
      "GTRasterTypeGeoKey=1(RasterPixelIsArea)", +
      "GTModelTypeGeoKey=2(ModelTypeGeographic)", +
      "GeogAngularUnitsGeoKey=9102(Angular_Degree)", +
      "GeographicTypeGeoKey=4326(GCS_WGS_84)", +
      "GeogEllipsoidGeoKey=7030(Ellipse_WGS84)")
gtlist xxxim2

gtmove xxxim2 xxxim3 rotation=15.0
gtlist xxxim3

!gtwarp xxxim3 xxxim4 ref=xxxim2 'coverinp
!xvd xxxim4

! Test 5 - test shift

gen xxxim1 nl=50 ns=50

gtgen inp=xxxim1 out=xxxim2 'tiecnvrt +
   geotiff=("ModelTiePointTag=(0,0,0,-118,35,0.0)", +
      "ModelTiePointTag=(50,0,0,-117,35,0.0)", +
      "ModelTiePointTag=(0,50,0,-118,34,0.0)", +
      "GTRasterTypeGeoKey=1(RasterPixelIsArea)", +
      "GTModelTypeGeoKey=2(ModelTypeGeographic)", +
      "GeogAngularUnitsGeoKey=9102(Angular_Degree)", +
      "GeographicTypeGeoKey=4326(GCS_WGS_84)", +
      "GeogEllipsoidGeoKey=7030(Ellipse_WGS84)")
gtlist xxxim2

gtmove xxxim2 xxxim3 shift=(1.9,3.1)
gtlist xxxim3
gtoffset xxxim2 xxxim3

! Test 6 - test hskew

gen xxxim1 nl=50 ns=50

gtgen inp=xxxim1 out=xxxim2 'tiecnvrt +
   geotiff=("ModelTiePointTag=(0,0,0,-118,35,0.0)", +
      "ModelTiePointTag=(50,0,0,-117,35,0.0)", +
      "ModelTiePointTag=(0,50,0,-118,34,0.0)", +
      "GTRasterTypeGeoKey=1(RasterPixelIsArea)", +
      "GTModelTypeGeoKey=2(ModelTypeGeographic)", +
      "GeogAngularUnitsGeoKey=9102(Angular_Degree)", +
      "GeographicTypeGeoKey=4326(GCS_WGS_84)", +
      "GeogEllipsoidGeoKey=7030(Ellipse_WGS84)")
gtlist xxxim2

gtmove xxxim2 xxxim3 hskew=15.0
gtlist xxxim3

!gtwarp xxxim3 xxxim4 ref=xxxim2 'coverinp
!xvd xxxim4

let $echo="no"
theend>
end-proc
